Как-то столкнулся с такой проблемой, что в ходе разработки обменов с сервисом Яндекс.Директ начисто пропало "взаимопонимание" скриптов со службой API. Перепроверив все возможное на ошибки обратился в службу поддержки. Вместе со специалистом поддержки еще раз перепроверили - все должно работать, однако не работает. В конце концов саппорт предложил мне проверить и заменить авторизационные токены и вообще регистрацию приложения в OAuth Яндекса. При проверке оказалось что данные по регистрации приложения отсутствую, а значит и токены недействительны. Специалист тогда честно сказал, что у них был сбой в БД и соответственно видимо откатом данные не всех пользователей удалось восстановить - ну это уже не важно.

Дабы впредь не попадать в подобные глупые ситуации я решил разработать скрипт для тестирования всего-чего возможно: соединения, авторизации, версий и проч. Скрипт который бы "железно" работал и по результатам работы которого можно было бы выстроить картину и определить причину возможных сбоев. Возможно кому-то он тоже пригодится.

Первоначальная идея скрипта довольно проста, без претензий. Никаких фреймворков, библиотек и прочего. Никакого интерфейса - все настройки через конфигурационный файл и переменные/массивы переменных в самом скрипте.

Файл настроек yd-common-check-constants.php с основными, не меняемыми настройками.  
yd-common-check-urls.php содержит массив с URL интересующих нас протоколов и версий Яндекс.Директ. Ненужные - комментируем, нужные - раскоменчиваем.
Ну и собственно сам скрипт yd-common-check.php. Без параметров скрипт проверяет функциями указанными по-умолчанию, но можно и указать функцию для проверки.